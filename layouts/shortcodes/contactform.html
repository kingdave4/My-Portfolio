<div class="contact-form-container">
  <form id="contactForm" class="contact-form">
    <div class="form-group">
      <input name="name" placeholder="Your Name" required>
    </div>
    <div class="form-group">
      <input name="email" type="email" placeholder="Your Email" required>
    </div>
    <div class="form-group">
      <textarea name="message" placeholder="Your Message" required></textarea>
    </div>
    <button type="submit" class="btn-submit">Send Message</button>
    <div id="formStatus" role="alert" class="form-status"></div>
  </form>
</div>

<script>
  const form = document.getElementById('contactForm');
  const status = document.getElementById('formStatus');

  form.addEventListener('submit', async e => {
    e.preventDefault();
    status.textContent = 'Sendingâ€¦';

    const data = Object.fromEntries(new FormData(form));

    try {
      const resp = await fetch('/api/submit_form', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      let result = {};
      try {
        result = await resp.json();
      } catch (err) {
        result = {};
      }

      status.textContent = resp.ok
        ? 'Thanks for reaching out!'
        : (result.error || 'Sorry, something went wrong.');
        
      if (resp.ok) form.reset();

    } catch (err) {
      status.textContent = 'Network error. Try again later.';
    }
  });
</script>
